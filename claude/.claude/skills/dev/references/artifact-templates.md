# 成果物テンプレート

各フェーズで生成する md ファイルのテンプレート。
状況に応じてセクションの追加・省略は可能だが、**技術判断ログ** と **変更履歴** は必須。
**ドメインに関する確認事項** はドメインの不明点がある場合のみ記載する。

---

## RFC テンプレート（Phase 1）

```markdown
# RFC: {機能名}

**ステータス**: draft | in-review | approved
**更新日**: YYYY-MM-DD
**イテレーション**: 1

---

## 背景

{この機能が必要な背景・課題の説明}

## 課題

{解決したい具体的な問題}

## 提案アプローチ

### 案1: {アプローチ名}

{概要説明}

**メリット**:
- ...

**デメリット**:
- ...

**実装コスト**: 低 / 中 / 高

### 案2: {アプローチ名}

{同上}

### 比較表

| 観点 | 案1 | 案2 |
|------|-----|-----|
| 実装コスト | | |
| パフォーマンス | | |
| 拡張性 | | |
| 既存コードとの整合性 | | |

### 推奨

{推奨案とその理由}

## リスクと軽減策

| リスク | 影響度 | 軽減策 |
|--------|--------|--------|
| | | |

## 前提条件・依存関係

- {この機能の実装に必要な前提}

## スコープ外

- {今回対応しないこと}

---

## 技術判断ログ

| # | 判断ポイント | 選択肢 | 決定 | 根拠 |
|---|-------------|--------|------|------|
| 1 | {例: データ永続化方式} | A: localStorage / B: DB / C: Session | B: DB | {既存アーキテクチャとの整合性、スケーラビリティ等} |

## ドメインに関する確認事項

{調査で確信が持てなかったドメインの判断のみ記載。該当なしなら「確認事項なし」}

1. **{ドメインの疑問点}**
   - 調査結果: {何を調べ、何がわかったか}
   - 想定: {Claude の現時点の想定}
   - 確認したいこと: {ユーザーに判断してほしい点}

## 変更履歴

- v1: 初回ドラフト
```

---

## PRD テンプレート（Phase 2）

```markdown
# PRD: {機能名}

**ステータス**: draft | in-review | approved
**更新日**: YYYY-MM-DD
**イテレーション**: 1

---

## 概要

{機能の概要（1-2文）}

## ドメイン構造サマリー

Phase 0 のドメイン構造分解を要約する。PRD の要件導出の根拠として参照する。

### コアエンティティ

| エンティティ | 説明 | ライフサイクル |
|-------------|------|---------------|
| {エンティティ名} | {概要} | {状態1} → {状態2} → ... → {最終状態} |

### ビジネスルール一覧

| # | ルール | 条件 | 対応要件 |
|---|--------|------|---------|
| BR-01 | {ルール名} | {適用条件} | Must Have #{N} |

### 管理ドキュメント

| ドキュメント | 作成タイミング | 管理要件 |
|-------------|---------------|---------|
| {ドキュメント名} | {いつ作られるか} | {保管・検索・閲覧・更新の要件} |

## 機能要件

Phase 0 のドメイン構造分解から体系的に導出する。

### Must Have
- [ ] {要件1}（エンティティ: {対応エンティティ}、ルール: BR-{N}）
- [ ] {要件2}

### Should Have
- [ ] {要件}

### Could Have
- [ ] {要件}

### Won't Have（今回対象外）
- {対象外の要件}

## 非機能要件

- **パフォーマンス**: {レスポンスタイム等}
- **セキュリティ**: {認証・認可要件等}
- **アクセシビリティ**: {WCAG レベル等}

## 受け入れ基準

各ビジネスルール（BR-xx）に対応する基準を必ず含める。

### {要件1}（BR-01 対応）
- Given: {前提条件}
- When: {操作}
- Then: {期待結果}

## 制約事項

- {技術的制約}
- {ビジネス的制約}

## 前提条件

- {前提}

## 網羅性チェック結果

| 観点 | チェック | 結果 |
|------|---------|------|
| エンティティ CRUD | 全エンティティの作成・読取・更新・削除に対応する要件があるか | OK / 不足: {内容} |
| ライフサイクル | 全状態遷移に対応する要件があるか | OK / 不足: {内容} |
| ビジネスルール | 全ルールに受け入れ基準があるか | OK / 不足: {内容} |
| ドキュメント管理 | 管理ドキュメントの要件があるか | OK / 不足: {内容} |
| ステークホルダー | 全アクターの関心事がカバーされているか | OK / 不足: {内容} |

---

## 技術判断ログ

| # | 判断ポイント | 選択肢 | 決定 | 根拠 |
|---|-------------|--------|------|------|
| 1 | {判断} | A / B | {決定} | {根拠} |

## ドメインに関する確認事項

{該当なしなら「確認事項なし」}

## 変更履歴

- v1: 初回ドラフト
```

---

## ユースケーステンプレート（Phase 3）

```markdown
# ユースケース: {機能名}

**ステータス**: draft | in-review | approved
**更新日**: YYYY-MM-DD
**イテレーション**: 1

---

## アクター

- {アクター名}: {説明、このアクターの主要なゴール}

## ドメインオブジェクト・ライフサイクル分析

Phase 0 で特定した各エンティティのライフサイクルからシナリオを導出する。

### {エンティティ名} のライフサイクル

```
{状態1} → {状態2} → ... → {最終状態}
```

| ライフサイクルイベント | 対応ユースケース |
|---------------------|----------------|
| {エンティティ}の作成 | UC-01 |
| {エンティティ}の{状態遷移} | UC-02 |
| {エンティティ}の終了/削除 | UC-03 |

## ステークホルダー × ゴールマトリクス

各アクターの各ゴールに対してシナリオを導出する。

| アクター | ゴール | 正常系UC | 異常系UC |
|---------|--------|---------|---------|
| {アクター1} | {ゴール1} | UC-01 | UC-E01 |
| {アクター1} | {ゴール2} | UC-02 | UC-E02 |
| {アクター2} | {ゴール1} | UC-03 | UC-E03 |

## ビジネスルール対応表

Phase 0 / Phase 2 で抽出した各ビジネスルールに対して、ルール充足・違反の両方のシナリオがあることを確認する。

| ビジネスルール | ルール充足シナリオ | ルール違反シナリオ |
|--------------|-------------------|-------------------|
| BR-01: {ルール名} | UC-01 | UC-E01 |
| BR-02: {ルール名} | UC-02 | UC-E02 |

## 正常系シナリオ

### UC-01: {シナリオ名}

- **アクター**: {誰が}
- **事前条件**: {前提}
- **トリガー**: {何がきっかけで}
- **手順**:
  1. {ステップ}
  2. {ステップ}
- **事後条件**: {結果の状態}
- **期待結果**: {ユーザーが見る結果}
- **対応要件**: Must Have #{N}
- **対応ビジネスルール**: BR-{N}

## 異常系シナリオ

### UC-E01: {シナリオ名}

- **アクター**: ...
- **事前条件**: ...
- **トリガー**: {異常な入力/状態}
- **手順**: ...
- **期待結果**: {エラーメッセージ、フォールバック動作}
- **対応要件**: Must Have #{N}
- **対応ビジネスルール**: BR-{N}（違反ケース）

## エッジケース

### UC-X01: {シナリオ名}

- **条件**: {境界値、特殊な状態}
- **期待結果**: {期待される振る舞い}

## 横断的関心事シナリオ

### 権限・認可
- UC-A01: {権限がない場合のシナリオ}

### 監査ログ
- UC-A02: {重要操作の追跡シナリオ}

### 通知
- UC-A03: {状態変化時の通知シナリオ}

### ドキュメント管理（管理ドキュメントがある場合）
- UC-A04: {ドキュメント作成・保管・検索・閲覧のシナリオ}

## 網羅性検証マトリクス

### 要件カバレッジ

| 要件ID | 要件 | 正常系UC | 異常系UC | カバレッジ |
|--------|------|---------|---------|-----------|
| Must #1 | {要件名} | UC-01 | UC-E01 | OK |
| Must #2 | {要件名} | UC-02 | — | **異常系不足** |

### ビジネスルールカバレッジ

| ルール | 充足UC | 違反UC | カバレッジ |
|--------|--------|--------|-----------|
| BR-01 | UC-01 | UC-E01 | OK |
| BR-02 | UC-02 | — | **違反ケース不足** |

---

## 技術判断ログ

| # | 判断ポイント | 選択肢 | 決定 | 根拠 |
|---|-------------|--------|------|------|
| 1 | {判断} | A / B | {決定} | {根拠} |

## ドメインに関する確認事項

{該当なしなら「確認事項なし」}

## 変更履歴

- v1: 初回ドラフト
```

---

## DDDモデルテンプレート（Phase 4）

```markdown
# DDDモデル: {機能名}

**ステータス**: draft | in-review | approved
**更新日**: YYYY-MM-DD
**イテレーション**: 1

---

## ユビキタス言語

| 用語 | 定義 | コード上の表現 | 備考 |
|------|------|----------------|------|
| | | | |

## 境界づけられたコンテキスト

### {コンテキスト名}

- **責務**: {何を管理するか}
- **主要概念**: {ドメインオブジェクト}
- **外部依存**: {他コンテキストとの関係}

## コンテキストマップ

{Mermaid 図}

## ドメインイベント

| イベント | トリガー | 発行元 | 消費者 |
|---------|---------|--------|--------|
| | | | |

## 既存コードとの整合性

### 整合している点
- ...

### 乖離・要検討
- ...

---

## 技術判断ログ

| # | 判断ポイント | 選択肢 | 決定 | 根拠 |
|---|-------------|--------|------|------|
| 1 | {判断} | A / B | {決定} | {根拠} |

## ドメインに関する確認事項

{該当なしなら「確認事項なし」}

## 変更履歴

- v1: 初回ドラフト
```

---

## UI/UXデザインテンプレート（Phase 5）

```markdown
# UI/UXデザイン: {機能名}

**ステータス**: draft | in-review | approved
**更新日**: YYYY-MM-DD
**イテレーション**: 1

---

## ユーザーフロー

{Mermaid フロー図}

## コンポーネント構成

### 新規作成
- `{ComponentName}/`
  - props: ...
  - 状態: ...

### 既存再利用
- `{ComponentName}/` — {変更の有無}

### shadcn/ui 使用
- `{コンポーネント名}` — {用途}

## 画面レイアウト

{ASCII ワイヤーフレーム or 説明}

## インタラクション定義

| 操作 | 状態変化 | フィードバック |
|------|---------|---------------|
| | | |

## Storybook ストーリー一覧

| ストーリー | パス | 状態 |
|-----------|------|------|
| {Name} Default | `components/{Name}/{Name}.stories.tsx` | 作成済み / 未作成 |

## アクセシビリティ

- キーボード: ...
- スクリーンリーダー: ...
- カラーコントラスト: ...

---

## 技術判断ログ

| # | 判断ポイント | 選択肢 | 決定 | 根拠 |
|---|-------------|--------|------|------|
| 1 | {判断} | A / B | {決定} | {根拠} |

## ドメインに関する確認事項

{該当なしなら「確認事項なし」}

## 変更履歴

- v1: 初回ドラフト
```

---

## 技術設計テンプレート（Phase 6）

```markdown
# 技術設計: {機能名}

**ステータス**: draft | in-review | approved
**更新日**: YYYY-MM-DD
**イテレーション**: 1

---

## アーキテクチャ

{Mermaid アーキテクチャ図}

## API 設計

### {METHOD} {path}

- **リクエスト**: {型定義}
- **レスポンス**: {型定義}
- **エラー**: {エラーコードと条件}
- **TypeSpec 定義**: {対応する TypeSpec の場所}

## データベーススキーマ

### 新規テーブル / カラム

```sql
-- {説明}
```

### マイグレーション手順

1. ...

## コンポーネント設計

### {コンポーネント/モジュール名}

- **責務**: ...
- **インターフェース**: ...
- **依存**: ...

## ファイル構成

### 新規ファイル
- `{path}` — {説明}

### 変更ファイル
- `{path}` — {変更内容}

## 実装順序

1. [ ] {ステップ}: {説明}（依存: なし）
2. [ ] {ステップ}: {説明}（依存: ステップ1）
3. [ ] {ステップ}: {説明}（依存: ステップ1）
4. [ ] {ステップ}: {説明}（依存: ステップ2,3）

---

## 技術判断ログ

| # | 判断ポイント | 選択肢 | 決定 | 根拠 |
|---|-------------|--------|------|------|
| 1 | {判断} | A / B | {決定} | {根拠} |

## ドメインに関する確認事項

{該当なしなら「確認事項なし」}

## 変更履歴

- v1: 初回ドラフト
```
