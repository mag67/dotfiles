# 意思決定支援リファレンス

Claude が技術選定のヒアリング・提案時に参照するガイド。
古くならない「プロセス」と「考え方」のみを記述する。

---

## 1. 意思決定マトリクスの使い方

Design It! アクティビティ32 に基づく定性評価。数値スコアは使わない。

### 評価記号

| 記号 | 意味 |
|------|------|
| **(+)** | その品質特性を促進する |
| **(o)** | 中立（特に影響しない） |
| **(-)** | その品質特性を阻害する |

### 制約

- **基準**: 最大 7 つ（それ以上は判断が困難になる）
- **選択肢**: 最大 5 つ（選択疲れ防止）

### 提示形式

Markdown テーブルで表示する:

```markdown
| 品質特性 | 候補A | 候補B | 候補C |
|---------|-------|-------|-------|
| パフォーマンス | (+) | (o) | (-) |
| DX | (-) | (+) | (+) |
| 学習コスト | (o) 備考 | (+) 備考 | (-) 備考 |
```

評価に補足が必要な場合は同セル内に短い備考を添える。

---

## 2. カテゴリ別の評価観点

技術名は書かず、評価軸のみ定義する。
実行時に WebSearch で最新の候補を調査し、以下の軸で比較する。

### フレームワーク

- SSR / SSG / SPA 対応
- エコシステムの規模と成熟度
- 学習コスト
- パフォーマンス（バンドルサイズ、初期ロード）
- 開発体験（DX）

### DB

- スケーラビリティ
- データモデル適合（リレーショナル / ドキュメント / KV）
- 運用コスト（マネージド / セルフホスト）
- エコシステム（ORM・ツール対応）

### ORM

- クエリパフォーマンス
- 開発体験（DX）
- 型安全性
- 学習コスト
- 成熟度・安定性

### 認証

- データオーナーシップ（セルフホスト可否）
- コスト構造（無料枠・従量課金）
- カスタマイズ性
- セットアップ容易性

### デプロイ

- コスト構造（無料枠・スケール時の課金）
- スケーラビリティ
- 開発体験（DX・CI/CD連携）
- エッジ対応

---

## 3. ENUF 原則 — 判断の深さを変更コストで決める

Design It! 3章の ENUF（Enough Design Up Front）に基づく。

| 変更コスト | 対応 | 例 |
|-----------|------|-----|
| **高**（後から差し替え困難） | 意思決定マトリクスで慎重に選定 | フレームワーク、DB、ORM、認証、デプロイ先 |
| **低**（容易に差し替え可能） | デフォルト推奨を提示し確認のみ | リンター、フォーマッター、テストランナー、CSS |

変更コスト高の項目は AskUserQuestion で明示的に質問する。
変更コスト低の項目は推奨値を一括提示し、異論がなければそのまま採用する。

---

## 4. Choose One Thing テンプレート

Design It! 6章のアクティビティを応用した二択質問。
品質特性の優先順位を素早く引き出す。

AskUserQuestion で以下の形式で提示する:

| 二択質問 | 得られる情報 |
|---------|------------|
| 開発スピード vs 型安全性 | TypeScript の厳密度 |
| パフォーマンス vs 開発体験(DX) | ORM 選定の方向性 |
| 初期コスト最小 vs スケーラビリティ | インフラ選定の方向性 |

質問数は **3問以内** に抑える。
